<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>OCHO</title>
</head>

<body style="font-family:Arial; text-align:center; padding:30px">
  <h2>ğŸ OCHO ğŸ‘½</h2>

  <p id="info" style="font-size:16px; opacity:.85"></p>

  <audio id="player" controls preload="auto" style="width:min(520px,95vw)"></audio>
  <br><br>

  <button id="btn" style="font-size:18px; padding:12px 18px; cursor:pointer;">
    â–¶ï¸ Ascolta
  </button>

  <button id="altro" style="font-size:18px; padding:12px 18px; cursor:pointer; margin-left:10px;">
    ğŸ” Un altro
  </button>

  <script>
    // ========= CONFIG =========
    const TOTAL = 123;        // NUMERO TOTALE DEI FILE MP3
    const FOLDER = "mp3";    // CARTELLA MP3 NEL REPO
    const SUFFIX = "_Chapter 0.mp3"; // SUFFISSO DEL NOME FILE

    // ========= ELEMENTI =========
    const player = document.getElementById("player");
    const info = document.getElementById("info");

    function pad3(n) {
      return String(n).padStart(3, "0");
    }

    function loadRandom() {
      const n = Math.floor(Math.random() * TOTAL) + 1; // 1..123
      const filename = `${pad3(n)}${SUFFIX}`;
      const url = `${FOLDER}/${encodeURIComponent(filename)}`;

      player.src = url;
      player.load();

      // ğŸ‘‡ FORMATO RICHIESTO
      info.textContent = `Traccia casuale: ${filename} (${n}/${TOTAL})`;
    }

    // CARICA UNA TRACCIA CASUALE ALL'APERTURA
    loadRandom();

    document.getElementById("btn").addEventListener("click", async () => {
      try {
        await player.play();
      } catch (e) {}
    });

    document.getElementById("altro").addEventListener("click", async () => {
      loadRandom();
      try {
        await player.play();
      } catch (e) {}
    });
  </script>
</body>
</html>
